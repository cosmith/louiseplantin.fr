{"version":3,"sources":["utils.js","chrome.js","index.js"],"names":["getBounds","image","x","y","top","bottom","height","left","right","width","intersects","otherImage","otherX","otherY","margin","bounds","otherBounds","Picto","_ref","letter","title","react_default","a","createElement","className","ZoomButtons","_ref2","onHomeClick","onZoomClick","onShuffleClick","onLanguageClick","onClick","bind","ArrowButtons","_ref3","SearchBar","_ref4","onSearch","type","placeholder","MenuFilterOption","_ref5","filters","name","label","onChange","Menu","_ref6","onFilterClick","_useState","useState","_useState2","Object","slicedToArray","open","setOpen","useSpring","from","config","duration","web","div","style","interpolate","concat","overflow","target","rel","href","transform","s","INITIAL_ZOOM","INITIAL_FILTERS","Facilitation","Corporate","Jeunesse","INITIAL_MAP_POSITION","MARGIN","GRID_SIZE","ZOOM_SPEED_WHEEL","ZOOM_SPEED_BUTTONS","MIN_ZOOM","HIDE_IMAGES_ZOOM","MAX_ZOOM","MOVE_SPEED","generatePositions","images","positions","forEach","filter","random","theta","radius","hasIntersection","Math","PI","floor","cos","sin","i","length","position","push","MIDDLE","window","innerWidth","innerHeight","getImagesParams","imagePositions","mapPosition","zoomLevel","xys","current","display","LegendSpan","cutoff","text","span","preventDefault","e","document","body","addEventListener","passive","render","useRef","setFilters","_useSprings","useSprings","_useSprings2","propsImages","setImages","useGesture","onDrag","_ref2$vxvy","vxvy","vx","vy","onPinch","_ref3$previous","previous","previousDistance","_ref3$da","da","distance","zoomSpeed","pow","clamp","onWheel","_ref4$delta","delta","yDelta","assign","id","direction","newFilters","objectSpread","defineProperty","map","key","showImage","value","transformOrigin","backgroundImage","scale","src","getSourceVariant","client","year","category","project","description","getElementById"],"mappings":"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","file":"static/js/main.70a672ec.chunk.js","sourcesContent":["export function randInt(min, max) {\n    return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport function getBounds(image, x, y) {\n    return {\n        top: y,\n        bottom: y + image.height,\n        left: x,\n        right: x + image.width,\n    };\n}\n\nexport function intersects(image, x, y, otherImage, otherX, otherY, margin) {\n    const bounds = getBounds(image, x, y);\n    const otherBounds = getBounds(otherImage, otherX, otherY);\n    return (\n        bounds.left - margin < otherBounds.right &&\n        bounds.right + margin > otherBounds.left &&\n        bounds.top - margin < otherBounds.bottom &&\n        bounds.bottom + margin > otherBounds.top\n    );\n}\n","import React, {useState} from \"react\";\nimport {useSpring, animated} from \"react-spring\";\nimport \"./chrome.css\";\n\nexport function Picto({letter, title}) {\n    return (\n        <span className=\"picto\" title={title}>\n            {letter}\n        </span>\n    );\n}\n\nexport function ZoomButtons({onHomeClick, onZoomClick, onShuffleClick, onLanguageClick}) {\n    return (\n        <div className=\"chrome zoom\">\n            <div className=\"chrome-button zoom-home\" onClick={onHomeClick}>\n                <Picto letter=\"D\" title=\"home\" />\n            </div>\n            <div className=\"chrome-button zoom-plus\" onClick={onZoomClick.bind(null, 1)}>\n                +\n            </div>\n            <div className=\"chrome-button zoom-minus\" onClick={onZoomClick.bind(null, -1)}>\n                -\n            </div>\n            <div className=\"chrome-button zoom-shuffle\" onClick={onShuffleClick}>\n                <Picto letter=\"E\" title=\"shuffle\" />\n            </div>\n            <div className=\"chrome-button zoom-language\" onClick={onLanguageClick}>\n                En\n            </div>\n        </div>\n    );\n}\n\nexport function ArrowButtons({onClick}) {\n    return (\n        <div className=\"chrome arrow\">\n            <div className=\"chrome-button arrow-left\" onClick={onClick.bind(null, 1)}>\n                <Picto letter=\"H\" title=\"left\" />\n            </div>\n            <div className=\"chrome-button arrow-right\" onClick={onClick.bind(null, -1)}>\n                <Picto letter=\"I\" title=\"right\" />\n            </div>\n        </div>\n    );\n}\n\nexport function SearchBar({onSearch}) {\n    return (\n        <div className=\"chrome search\">\n            <div className=\"search-input-container\">\n                <input\n                    type=\"text\"\n                    className=\"search-input\"\n                    placeholder=\"Client | Année | Projet...\"\n                />\n            </div>\n            <div className=\"chrome-button chrome-button-search\">\n                <Picto letter=\"A\" title=\"search\" />\n            </div>\n        </div>\n    );\n}\n\nfunction MenuFilterOption({filters, name, label, onChange}) {\n    return (\n        <div className=\"menu-filters-option\" onClick={onChange.bind(null, name)}>\n            <Picto letter={filters[name] ? \"M\" : \"L\"} /> {label}\n        </div>\n    );\n}\n\nexport function Menu({filters, onFilterClick}) {\n    const [open, setOpen] = useState(true);\n    const {height} = useSpring({\n        from: {height: 0},\n        height: open ? 1 : 0,\n        config: {duration: 200},\n    });\n\n    return (\n        <div className=\"chrome menu\">\n            <div className=\"menu-section menu-title\">\n                Louise Plantin\n                <br />\n                Graphic facilitator\n                <br />\n                &mdash; Illustrator\n            </div>\n            <animated.div\n                style={{\n                    height: height.interpolate(height => `${height * 250}px`),\n                    overflow: \"hidden\",\n                }}\n            >\n                <div className=\"menu-section menu-contact\">\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"mailto:louiseillu@yahoo.fr\">\n                        louiseillu @yahoo.fr\n                    </a>\n                    <br />\n                    06 52 55 41 18\n                    <div className=\"menu-social\">\n                        <a\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://www.linkedin.com/in/louise-plantin-4b021186/\"\n                        >\n                            <Picto letter=\"F\" title=\"LinkedIn\" />\n                        </a>\n                        <a\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://www.twitter.com/louiseplantin/\"\n                        >\n                            <Picto letter=\"G\" title=\"Twitter\" />\n                        </a>\n                        <a\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://www.instagram.com/louise.plantin/\"\n                        >\n                            <Picto letter=\"C\" title=\"Instagram\" />\n                        </a>\n                    </div>\n                </div>\n                <div className=\"menu-section menu-filters\">\n                    <MenuFilterOption\n                        filters={filters}\n                        name={\"Facilitation\"}\n                        label={\"Facilitation\"}\n                        onChange={onFilterClick}\n                    />\n                    <MenuFilterOption\n                        filters={filters}\n                        name={\"Corporate\"}\n                        label={\"Corporate\"}\n                        onChange={onFilterClick}\n                    />\n                    <MenuFilterOption\n                        filters={filters}\n                        name={\"Jeunesse\"}\n                        label={\"Jeunesse\"}\n                        onChange={onFilterClick}\n                    />\n                </div>\n            </animated.div>\n            <div className=\"menu-collapse\" />\n            <animated.div\n                className=\"close-button\"\n                onClick={() => setOpen(!open)}\n                style={{transform: height.interpolate(s => `rotate(${s * 180}deg)`)}}\n            >\n                <Picto letter={\"K\"} />\n            </animated.div>\n        </div>\n    );\n}\n","import {render} from \"react-dom\";\nimport React, {useRef, useState} from \"react\";\nimport {useSprings, animated} from \"react-spring\";\nimport {useGesture} from \"react-use-gesture\";\nimport {clamp, random} from \"lodash-es\";\n\nimport {intersects} from \"./utils\";\nimport {ZoomButtons, ArrowButtons, SearchBar, Menu} from \"./chrome\";\nimport \"./styles.css\";\nimport images from \"./images.json\";\n\nconst INITIAL_ZOOM = 0.2;\nconst INITIAL_FILTERS = {Facilitation: true, Corporate: true, Jeunesse: true};\nconst INITIAL_MAP_POSITION = {x: 0, y: 0};\n\nconst MARGIN = 300;\nconst GRID_SIZE = 400;\n\nconst ZOOM_SPEED_WHEEL = 1.05;\nconst ZOOM_SPEED_BUTTONS = 1.7;\nconst MIN_ZOOM = 0.01;\nconst HIDE_IMAGES_ZOOM = 0.1;\nconst MAX_ZOOM = 1.3;\nconst MOVE_SPEED = 20;\n\nfunction generatePositions(images, filters) {\n    const positions = [];\n\n    images.forEach(image => {\n        if (!filters[image.filter]) {\n            // don't compute for images hidden by filters\n            positions.push([0, 0]);\n            return;\n        }\n        let x = random(-50, 50) * GRID_SIZE;\n        let y = random(-50, 50) * GRID_SIZE;\n        let theta = 0;\n        let radius = 0;\n\n        let hasIntersection = true;\n\n        while (hasIntersection) {\n            hasIntersection = false;\n            theta += (random(10, 25) / 180) * Math.PI;\n            if (theta > Math.PI * 2) {\n                radius += 50;\n            }\n            x = Math.floor(Math.cos(theta) * radius);\n            y = Math.floor(Math.sin(theta) * radius);\n            for (let i = 0; i < positions.length; i++) {\n                let position = positions[i];\n                hasIntersection =\n                    hasIntersection ||\n                    intersects(image, x, y, images[i], position[0], position[1], MARGIN);\n            }\n        }\n\n        positions.push([x, y]);\n    });\n    return positions;\n}\n\nconst MIDDLE = {x: window.innerWidth / 2, y: window.innerHeight / 2};\n\nfunction getImagesParams(imagePositions, mapPosition, zoomLevel, filters) {\n    return i => {\n        return {\n            xys: [\n                MIDDLE.x +\n                    (imagePositions.current[i][0] + mapPosition.current.x) * zoomLevel.current,\n                MIDDLE.y +\n                    (imagePositions.current[i][1] + mapPosition.current.y) * zoomLevel.current,\n                zoomLevel.current,\n            ],\n            display: filters[images[i].filter] ? \"block\" : \"none\",\n        };\n    };\n}\n\nfunction LegendSpan({xys, cutoff, text}) {\n    return (\n        <animated.span\n            style={{\n                display: xys.interpolate((x, y, s) => (s > cutoff ? \"inline\" : \"none\")),\n            }}\n        >\n            {\" | \"}\n            {text}\n        </animated.span>\n    );\n}\n\nfunction showImage(x, y, s, image, mapPosition) {\n    const displayMargin = 50;\n    if (x > window.innerWidth + displayMargin) {\n        return false;\n    }\n    if (y > window.innerHeight + displayMargin) {\n        return false;\n    }\n    if (x + image.width * s + displayMargin < 0) {\n        return false;\n    }\n    if (y + image.height * s + displayMargin < 0) {\n        return false;\n    }\n    return true;\n}\n\nfunction getSourceVariant(s, image) {\n    let scale;\n    if (s > 0.8) {\n        scale = \"@original\";\n    } else if (s > 0.4) {\n        scale = \"@3x\";\n    } else if (s > 0.1) {\n        scale = \"@2x\";\n    } else {\n        scale = \"@1x\";\n    }\n    return `url(\"${image.src}${scale}.jpg\")`;\n}\n\nfunction Viewpager() {\n    const zoomLevel = useRef(INITIAL_ZOOM);\n    const mapPosition = useRef(INITIAL_MAP_POSITION);\n    const [filters, setFilters] = useState(INITIAL_FILTERS);\n    const imagePositions = useRef(generatePositions(images, filters));\n\n    const [propsImages, setImages] = useSprings(\n        images.length,\n        getImagesParams(imagePositions, mapPosition, zoomLevel, filters)\n    );\n\n    const bind = useGesture({\n        onDrag: ({vxvy: [vx, vy]}) => {\n            mapPosition.current = {\n                x: (vx * MOVE_SPEED) / zoomLevel.current + mapPosition.current.x,\n                y: (vy * MOVE_SPEED) / zoomLevel.current + mapPosition.current.y,\n            };\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n        },\n        onPinch: ({previous: [previousDistance, previousAngle], da: [distance, angle]}) => {\n            const zoomSpeed = Math.pow(distance / previousDistance, 2);\n            zoomLevel.current = clamp(zoomLevel.current * zoomSpeed, MIN_ZOOM, MAX_ZOOM);\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n        },\n        onWheel: ({delta: [xDelta, yDelta]}) => {\n            if (yDelta === 0) {\n                return;\n            }\n            zoomLevel.current = clamp(\n                yDelta < 0\n                    ? ZOOM_SPEED_WHEEL * zoomLevel.current\n                    : zoomLevel.current / ZOOM_SPEED_WHEEL,\n                MIN_ZOOM,\n                MAX_ZOOM\n            );\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n        },\n    });\n\n    return (\n        <div {...bind()} id=\"container\" className=\"touch-drag touch-zoom\">\n            <ZoomButtons\n                onHomeClick={() => {\n                    zoomLevel.current = INITIAL_ZOOM;\n                    mapPosition.current = INITIAL_MAP_POSITION;\n                    setFilters(INITIAL_FILTERS);\n                    imagePositions.current = generatePositions(images, INITIAL_FILTERS);\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n                }}\n                onZoomClick={direction => {\n                    zoomLevel.current = clamp(\n                        direction > 0\n                            ? ZOOM_SPEED_BUTTONS * zoomLevel.current\n                            : zoomLevel.current / ZOOM_SPEED_BUTTONS,\n                        MIN_ZOOM,\n                        MAX_ZOOM\n                    );\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n                }}\n                onShuffleClick={() => {\n                    imagePositions.current = generatePositions(images, filters);\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n                }}\n            />\n            <ArrowButtons onClick={() => {}} />\n            <SearchBar onSearch={() => {}} />\n            <Menu\n                filters={filters}\n                onFilterClick={filter => {\n                    const newFilters = {...filters, [filter]: !filters[filter]};\n                    setFilters(newFilters);\n                    imagePositions.current = generatePositions(images, newFilters);\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, newFilters));\n                }}\n            />\n            {/*<animated.div className=\"debug-info\">\n                {propsImages.map(({xys, display}, i) => (\n                    <animated.div\n                        style={{\n                            padding: \"5px\",\n                            backgroundColor: xys.interpolate((x, y, s) =>\n                                showImage(x, y, s, images[i], mapPosition.current) ? \"blue\" : \"red\"\n                            ),\n                            flex: 1,\n                        }}\n                    >\n                        {i}\n                    </animated.div>\n                ))}\n            </animated.div>*/}\n            <animated.div id=\"map\">\n                {propsImages.map(({xys, display}, i) => (\n                    <animated.div\n                        className=\"image-container\"\n                        key={i}\n                        style={{\n                            display: xys.interpolate((x, y, s) =>\n                                showImage(x, y, s, images[i], mapPosition.current)\n                                    ? display.value\n                                    : \"none\"\n                            ),\n                            transform: xys.interpolate(\n                                (x, y, s) => `translate3d(${x}px,${y}px,0)`\n                            ),\n                        }}\n                    >\n                        <animated.div\n                            className=\"image\"\n                            style={{\n                                width: `${images[i].width}px`,\n                                height: `${images[i].height}px`,\n                                transform: xys.interpolate((x, y, s) => `scale(${s})`),\n                                transformOrigin: \"0 0\",\n                                backgroundImage: xys.interpolate((x, y, s) =>\n                                    getSourceVariant(s, images[i])\n                                ),\n                                display: xys.interpolate((x, y, s) =>\n                                    s > HIDE_IMAGES_ZOOM ? \"inherit\" : \"none\"\n                                ),\n                            }}\n                        />\n                        <animated.div\n                            className=\"legend\"\n                            style={{\n                                position: \"absolute\",\n                                top: xys.interpolate((x, y, s) => `${images[i].height * s}px`),\n                                width: xys.interpolate(\n                                    (x, y, s) =>\n                                        `${s > HIDE_IMAGES_ZOOM ? images[i].width * s : 5000}px`\n                                ),\n                            }}\n                        >\n                            {images[i].client}\n                            <LegendSpan xys={xys} cutoff={0.3} text={images[i].year} />\n                            <LegendSpan xys={xys} cutoff={0.5} text={images[i].category} />\n                            <LegendSpan xys={xys} cutoff={0.7} text={images[i].project} />\n                            <LegendSpan xys={xys} cutoff={0.9} text={images[i].description} />\n                        </animated.div>\n                    </animated.div>\n                ))}\n            </animated.div>\n        </div>\n    );\n}\n\nfunction preventDefault(e) {\n    e.preventDefault();\n}\n\nfunction disableScroll() {\n    document.body.addEventListener(\"touchmove\", preventDefault, {passive: false});\n}\n\ndisableScroll();\n\nrender(<Viewpager />, document.getElementById(\"root\"));\n"],"sourceRoot":""}